---
title: Bonnes pratiques pour manipuler des donnÃ©es en toute sÃ©curitÃ©
layout: home
nav_order: 6
parent: Connecter une application Ã  une base de donnÃ©es
permalink: /connecter-application-bdd/bonnes-pratiques-securite/
---


# ğŸ“˜ Chapitre 6 â€“ Bonnes pratiques pour manipuler des donnÃ©es en toute sÃ©curitÃ©

## 1. ğŸ¯ Objectif pÃ©dagogique

Appliquer les **bonnes pratiques de sÃ©curitÃ©** lors de lâ€™utilisation de PHP et PDO pour Ã©viter les failles comme les injections SQL et sÃ©curiser les opÃ©rations CRUD.

## 2. ğŸ“š Concepts abordÃ©s

* Validation et nettoyage des donnÃ©es utilisateur (`filter_var`, `htmlspecialchars`)
* Utilisation systÃ©matique des **requÃªtes prÃ©parÃ©es**
* Gestion des erreurs et logs (sans divulguer les messages sensibles)
* Droits dâ€™accÃ¨s limitÃ©s pour lâ€™utilisateur MySQL
* Sauvegarde et prÃ©vention des pertes de donnÃ©es

## 3. ğŸ§  Explication thÃ©orique

Une application web doit toujours **valider** et **nettoyer** les donnÃ©es reÃ§ues (ex. via formulaires).
Exemple de validation :

```php
$email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);
```

Les **requÃªtes prÃ©parÃ©es** empÃªchent les attaques par injection SQL en Ã©vitant lâ€™exÃ©cution directe des donnÃ©es reÃ§ues.
La gestion des erreurs doit se faire par logs (fichiers) plutÃ´t que par affichage direct sur la page en production.

## 4. ğŸ›  Tutoriel pratique

**RÃ©sumÃ© du travail** : AmÃ©liorer un script PHP pour sÃ©curiser les donnÃ©es lors de lâ€™insertion.

**Arborescence projet** :

```
projet_bdd/
 â”œâ”€â”€ connexion.php
 â””â”€â”€ ajout_utilisateur_secure.php
```

### Ã‰tape 1 : Valider les entrÃ©es

```php
<?php
require 'connexion.php';

$nom = htmlspecialchars(trim($_POST['nom']));
$email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);

if (!$email) {
    die("Email invalide !");
}
```

### Ã‰tape 2 : Utiliser des requÃªtes prÃ©parÃ©es

```php
$stmt = $pdo->prepare("INSERT INTO Utilisateur (nom, email) VALUES (:nom, :email)");
$stmt->execute([
    'nom' => $nom,
    'email' => $email
]);
echo "Utilisateur ajoutÃ© avec succÃ¨s.";
```

### Ã‰tape 3 : GÃ©rer les erreurs sans fuite dâ€™informations

```php
try {
    // Code dâ€™insertion
} catch (PDOException $e) {
    file_put_contents('logs/errors.log', $e->getMessage(), FILE_APPEND);
    echo "Une erreur est survenue. Contactez lâ€™administrateur.";
}
```

### Ã‰tape 4 : Restreindre les droits MySQL

* CrÃ©er un utilisateur MySQL avec des droits limitÃ©s (`SELECT`, `INSERT`, `UPDATE`, `DELETE`) plutÃ´t que `ALL PRIVILEGES`.

## 5. ğŸ§¾ RÃ©sumÃ© et points-clÃ©s

* Toujours valider et nettoyer les donnÃ©es utilisateur.
* Utiliser **prepare() + execute()** pour toutes les requÃªtes SQL.
* Les messages dâ€™erreur sensibles ne doivent pas apparaÃ®tre cÃ´tÃ© client.
* Les utilisateurs MySQL doivent avoir des **droits restreints** pour limiter les risques.
