---
title: ExÃ©cuter une requÃªte SELECT et afficher les rÃ©sultats
layout: home
nav_order: 2
parent: Connecter une application Ã  une base de donnÃ©es
permalink: /connecter-application-bdd/select-afficher-resultats/
---


# ğŸ“˜ Chapitre 2 â€“ ExÃ©cuter une requÃªte SELECT et afficher les rÃ©sultats

## 1. ğŸ¯ Objectif pÃ©dagogique

ÃŠtre capable dâ€™exÃ©cuter une requÃªte **SELECT** via PDO et dâ€™afficher les rÃ©sultats dans une page PHP.

## 2. ğŸ“š Concepts abordÃ©s

* MÃ©thode `query()` et `prepare()/execute()` de PDO
* RÃ©cupÃ©ration des rÃ©sultats avec `fetch()` et `fetchAll()`
* Boucles pour afficher les donnÃ©es (while/foreach)
* Gestion des exceptions lors de lâ€™exÃ©cution des requÃªtes
* Affichage formatÃ© dans une page web (HTML + PHP)

## 3. ğŸ§  Explication thÃ©orique

Pour exÃ©cuter une requÃªte `SELECT`, PDO offre deux approches principales :

* **query()** : utilisÃ©e pour des requÃªtes simples et directes.
* **prepare() / execute()** : utilisÃ©e pour des requÃªtes plus complexes ou sÃ©curisÃ©es (avec paramÃ¨tres).

**Exemple de rÃ©cupÃ©ration simple :**

```php
$sql = "SELECT * FROM Utilisateur";
$result = $pdo->query($sql);
```

Les donnÃ©es peuvent ensuite Ãªtre affichÃ©es en utilisant `fetch()` (ligne par ligne) ou `fetchAll()` (toutes les lignes en un tableau).

## 4. ğŸ›  Tutoriel pratique

**RÃ©sumÃ© du travail** : CrÃ©er un fichier `liste_utilisateurs.php` qui affiche les utilisateurs dâ€™une table `Utilisateur`.

**Arborescence projet** :

```
projet_bdd/
 â”œâ”€â”€ connexion.php
 â””â”€â”€ liste_utilisateurs.php
```

### Ã‰tape 1 : PrÃ©parer la table Utilisateur

ExÃ©cuter dans MySQL :

```sql
CREATE TABLE Utilisateur (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nom VARCHAR(100),
  email VARCHAR(100)
);

INSERT INTO Utilisateur (nom, email)
VALUES ('Alice', 'alice@test.com'), ('Bob', 'bob@test.com');
```

### Ã‰tape 2 : Ã‰crire la requÃªte SELECT

Dans `liste_utilisateurs.php` :

```php
<?php
require 'connexion.php';

try {
    $sql = "SELECT * FROM Utilisateur";
    $stmt = $pdo->query($sql);

    $utilisateurs = $stmt->fetchAll(PDO::FETCH_ASSOC);

    foreach ($utilisateurs as $user) {
        echo "ID : " . $user['id'] . " - Nom : " . $user['nom'] . " - Email : " . $user['email'] . "<br>";
    }
} catch (PDOException $e) {
    echo "Erreur : " . $e->getMessage();
}
```

### Ã‰tape 3 : Test et affichage

* AccÃ©der Ã  [http://localhost/projet\_bdd/liste\_utilisateurs.php](http://localhost/projet_bdd/liste_utilisateurs.php).
* VÃ©rifier que les utilisateurs sâ€™affichent correctement.

### Ã‰tape 4 : Affichage sous forme de tableau HTML (optionnel)

```php
echo "<table border='1'>
<tr><th>ID</th><th>Nom</th><th>Email</th></tr>";
foreach ($utilisateurs as $user) {
    echo "<tr><td>{$user['id']}</td><td>{$user['nom']}</td><td>{$user['email']}</td></tr>";
}
echo "</table>";
```

## 5. ğŸ§¾ RÃ©sumÃ© et points-clÃ©s

* `query()` exÃ©cute une requÃªte simple et retourne un objet `PDOStatement`.
* `fetchAll(PDO::FETCH_ASSOC)` retourne un tableau associatif de tous les rÃ©sultats.
* Utiliser des boucles pour parcourir et afficher les donnÃ©es.
* Toujours gÃ©rer les erreurs avec `try/catch`.
