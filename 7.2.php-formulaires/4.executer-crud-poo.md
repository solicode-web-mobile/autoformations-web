---
title: ExÃ©cuter des opÃ©rations CRUD en POO
layout: home
nav_order: 4
parent: Programmation orientÃ©e objet
permalink: /poo-php/executer-crud-poo/
---


# ğŸ“˜ Chapitre â€“ ExÃ©cuter des opÃ©rations CRUD en POO

## 1. ğŸ¯ Objectif pÃ©dagogique

Savoir structurer un code PHP orientÃ© objet pour exÃ©cuter des opÃ©rations **CRUD (Create, Read, Update, Delete)** de maniÃ¨re claire et rÃ©utilisable.

## 2. ğŸ“š Concepts abordÃ©s

* Classe et mÃ©thode pour les opÃ©rations CRUD
* Instanciation dâ€™objets et gestion des donnÃ©es
* Connexion PDO encapsulÃ©e dans une classe
* Bonnes pratiques de sÃ©paration logique (fichier `Database.php` + `User.php`)
* ExÃ©cution de mÃ©thodes : `create()`, `read()`, `update()`, `delete()`

## 3. ğŸ§  Explication thÃ©orique

En POO, les opÃ©rations CRUD sont regroupÃ©es dans des **mÃ©thodes dâ€™une classe**. Par exemple, une classe `User` peut contenir :

* `create()` pour ajouter un utilisateur,
* `read()` pour afficher les informations,
* `update()` pour les modifier,
* `delete()` pour les supprimer.

Cette approche rend le code plus **modulaire** et **facile Ã  maintenir**.

## 4. ğŸ›  Tutoriel pratique

**RÃ©sumÃ© du travail** : CrÃ©er une classe `User` avec des mÃ©thodes CRUD utilisant PDO.

**Arborescence projet :**

```
projet_poo_crud/
 â”œâ”€â”€ Database.php
 â”œâ”€â”€ User.php
 â””â”€â”€ index.php
```

### Ã‰tape 1 : Classe de connexion (Database.php)

```php
<?php
class Database {
    private $host = "localhost";
    private $dbname = "blogdb";
    private $username = "root";
    private $password = "";
    public $conn;

    public function getConnection() {
        $this->conn = null;
        try {
            $this->conn = new PDO("mysql:host={$this->host};dbname={$this->dbname};charset=utf8", 
                                  $this->username, $this->password);
            $this->conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            echo "Erreur de connexion : " . $e->getMessage();
        }
        return $this->conn;
    }
}
```

### Ã‰tape 2 : Classe User avec CRUD (User.php)

```php
<?php
class User {
    private $conn;
    private $table = "users";

    public $id;
    public $nom;
    public $email;

    public function __construct($db) {
        $this->conn = $db;
    }

    // CREATE
    public function create() {
        $sql = "INSERT INTO {$this->table} (nom, email) VALUES (:nom, :email)";
        $stmt = $this->conn->prepare($sql);
        return $stmt->execute(['nom' => $this->nom, 'email' => $this->email]);
    }

    // READ
    public function read() {
        $sql = "SELECT * FROM {$this->table}";
        $stmt = $this->conn->query($sql);
        return $stmt->fetchAll(PDO::FETCH_ASSOC);
    }

    // UPDATE
    public function update() {
        $sql = "UPDATE {$this->table} SET nom=:nom, email=:email WHERE id=:id";
        $stmt = $this->conn->prepare($sql);
        return $stmt->execute(['nom' => $this->nom, 'email' => $this->email, 'id' => $this->id]);
    }

    // DELETE
    public function delete() {
        $sql = "DELETE FROM {$this->table} WHERE id=:id";
        $stmt = $this->conn->prepare($sql);
        return $stmt->execute(['id' => $this->id]);
    }
}
```

### Ã‰tape 3 : Utilisation dans `index.php`

```php
<?php
require 'Database.php';
require 'User.php';

// Connexion
$database = new Database();
$db = $database->getConnection();

// CrÃ©er un utilisateur
$user = new User($db);
$user->nom = "Alice";
$user->email = "alice@test.com";
$user->create();

// Lire les utilisateurs
$liste = $user->read();
foreach ($liste as $u) {
    echo $u['nom'] . " - " . $u['email'] . "<br>";
}
```

## 5. ğŸ§¾ RÃ©sumÃ© et points-clÃ©s

* Les **classes** permettent dâ€™organiser les opÃ©rations CRUD en mÃ©thodes rÃ©utilisables.
* **PDO** est intÃ©grÃ© directement dans la classe pour sÃ©curiser les requÃªtes.
* Les fichiers sont sÃ©parÃ©s pour une meilleure maintenance (connexion et logique mÃ©tier).
* Cette structure est une **premiÃ¨re Ã©tape vers le MVC**.
